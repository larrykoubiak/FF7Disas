<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>FF8/FileFormat X - QhimmWiki</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.20.2" />
<link rel="shortcut icon" href="http://wiki.qhimm.com/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qhimm.com/opensearch_desc.php" title="QhimmWiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qhimm.com/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/2.5/" />
<link rel="alternate" type="application/atom+xml" title="QhimmWiki Atom feed" href="http://wiki.qhimm.com/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="../../load.php@debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cskins.vector&amp;only=styles&amp;skin=vector&amp;%252A.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qhimm_wiki:resourceloader:filter:minify-css:7:9f75cd7a214f5d1850ed6d0df1a4a089 */</style>

<script src="../../load.php@debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;%252A"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"FF8/FileFormat_X","wgTitle":"FF8/FileFormat X","wgCurRevisionId":5249,"wgArticleId":1781,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"FF8/FileFormat_X","wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,
"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","watchToken":false});;},{},{});
/* cache key: qhimm_wiki:resourceloader:filter:minify-js:7:7330ebaa3a8da3f7992caf476ddb8efd */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-FF8_FileFormat_X skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content" class="mw-body">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading"><span dir="auto">FF8/FileFormat X</span></h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
								<!-- tagline -->
				<div id="siteSub">From QhimmWiki</div>
				<!-- /tagline -->
								<!-- subtitle -->
				<div id="contentSub"><span class="subpages">&lt; <a href="../FF8.html" title="FF8">FF8</a></span></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="FileFormat_X.html#mw-head">navigation</a>, 					<a href="FileFormat_X.html#p-search">search</a>
				</div>
				<!-- /jumpto -->
								<!-- bodycontent -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>By MaKiPL. Thanks for help in research for: shakotay2 (XeNTaX), Halfer, Yagami Light.  
Complete list of original battle stages by Kaspar01: <a href="BS_list.html" title="FF8/BS list">List of battle stages</a>
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="FileFormat_X.html#Info"><span class="tocnumber">1</span> <span class="toctext">Info</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="FileFormat_X.html#How_is_this_file_handled_by_the_engine.3F"><span class="tocnumber">2</span> <span class="toctext">How is this file handled by the engine?</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="FileFormat_X.html#Camera_data"><span class="tocnumber">3</span> <span class="toctext">Camera data</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="FileFormat_X.html#Geometry"><span class="tocnumber">4</span> <span class="toctext">Geometry</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="FileFormat_X.html#Group"><span class="tocnumber">4.1</span> <span class="toctext">Group</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="FileFormat_X.html#Triangle"><span class="tocnumber">4.1.1</span> <span class="toctext">Triangle</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="FileFormat_X.html#Quad"><span class="tocnumber">4.1.2</span> <span class="toctext">Quad</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="FileFormat_X.html#CLUT_ID"><span class="tocnumber">4.2</span> <span class="toctext">CLUT ID</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="FileFormat_X.html#Texture"><span class="tocnumber">5</span> <span class="toctext">Texture</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="FileFormat_X.html#UV_calculation_algorithm"><span class="tocnumber">5.1</span> <span class="toctext">UV calculation algorithm</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="FileFormat_X.html#Texture_page_calculation"><span class="tocnumber">5.2</span> <span class="toctext">Texture page calculation</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="FileFormat_X.html#Face_order_.2F_Translation.2F_triangulation"><span class="tocnumber">5.3</span> <span class="toctext">Face order / Translation/ triangulation</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Info"> Info </span></h2>
<p>.X file is uncompressed 3D stage model with texture embedeed. The file contains unused info (not used by FF8 engine), camera data, movement, translations and geometry data. 
</p><p>Battle stages <b>DOES NOT</b> contain pointers to next sections. All pointers are <b>HARDCODED</b> in FF8.EXE. <a href="BattleStage/Pointers.html" title="FF8/BattleStage/Pointers">Click me for battle stage pointer list</a>
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Name
</th>
<th style="background:rgb(204,204,204)"> Usually starting with:
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> Unused data
</td>
<td> E8 FF BD 27 01 00 02
</td>
<td> This data is unused by FF8 Engine
</td></tr>
<tr>
<td> Camera data + movement
</td>
<td> 02 00 08 00 20 00
</td>
<td> Camera animations, movement (pre-keyed)
</td></tr>
<tr>
<td> Model section
</td>
<td> 06 00 00 00 (See geometry section info)
</td>
<td> Divides to object (group) and it's sub-objects + vert/triangle grouping
</td></tr>
<tr>
<td> Texture
</td>
<td> 01 00 00 00 09 (Always)
</td>
<td> Contains one .TIM texture
</td></tr></table>
<h2> <span class="mw-headline" id="How_is_this_file_handled_by_the_engine.3F"> How is this file handled by the engine? </span></h2>
<p>FF8 loads specific file and reads it from hardcoded (written in FF8 code) position. This hardcoded position points to camera data. Camera data has size uint16, which is calculated and relative jump is made. Just after camera, a typical section based file handling is made. 
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Offset
</th>
<th style="background:rgb(204,204,204)"> Length
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> 0
</td>
<td> uint32
</td>
<td> Number of sections
</td></tr>
<tr>
<td> 4
</td>
<td> uint32
</td>
<td> Objects group #1 (NULL?)
</td></tr>
<tr>
<td> 8
</td>
<td> uint32
</td>
<td> Objects group #2
</td></tr>
<tr>
<td> 12
</td>
<td> uint32
</td>
<td> Objects group #3
</td></tr>
<tr>
<td> 16
</td>
<td> uint32
</td>
<td> Objects group #4
</td></tr>
<tr>
<td> 20
</td>
<td> uint32
</td>
<td> Texture [unused in code]
</td></tr>
<tr>
<td> 24
</td>
<td> uint32
</td>
<td> Texture
</td></tr>
<tr>
<td> 28
</td>
<td> uint32
</td>
<td> Relative to EOF
</td></tr></table>
<p><b>Objects group:</b>
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Offset
</th>
<th style="background:rgb(204,204,204)"> Length
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> 0
</td>
<td> uint32
</td>
<td> Number of sections
</td></tr>
<tr>
<td> 4
</td>
<td> uint32
</td>
<td> Pointer to Settings #1
</td></tr>
<tr>
<td> 8
</td>
<td> uint32
</td>
<td> Pointer to ObjectsList
</td></tr>
<tr>
<td> 12
</td>
<td> uint32
</td>
<td> Pointer to Settings #2
</td></tr>
<tr>
<td> 16
</td>
<td> uint32
</td>
<td> Relative to end_of_group
</td></tr></table>
<p><b>Objects list:</b>
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Offset
</th>
<th style="background:rgb(204,204,204)"> Length
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> 0
</td>
<td> uint32
</td>
<td> Number of objects
</td></tr>
<tr>
<td> Num_of_obj*4
</td>
<td> uint32
</td>
<td> Relative pointer to segment (one .obj file) [01 00 01 00]
</td></tr></table>
<p><b>Settings 1:</b>
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Offset
</th>
<th style="background:rgb(204,204,204)"> Length
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> 0
</td>
<td> uint16
</td>
<td> Unknown, fixed 2?
</td></tr>
<tr>
<td> 2
</td>
<td> sint16 (probably, or uint16)
</td>
<td> Scale (01 is the smallest)
</td></tr>
<tr>
<td> 4
</td>
<td> 4 bytes
</td>
<td> PADDING
</td></tr>
<tr>
<td> 8
</td>
<td> 4 bytes
</td>
<td> Nothing?
</td></tr>
<tr>
<td> 12
</td>
<td> 4 bytes
</td>
<td> Nothing?
</td></tr>
<tr>
<td> 16
</td>
<td> 2 bytes
</td>
<td> if not FF FF, then model vanishes
</td></tr>
<tr>
<td> 18
</td>
<td> sint16
</td>
<td> X or Z Axis rot origin (Translation)
</td></tr>
<tr>
<td> 20
</td>
<td> 44 bytes
</td>
<td> Left null for storing some engine data AFTER loaded in-game
</td></tr>
<tr>
<td> 64
</td>
<td> 2 bytes
</td>
<td> if not FF FF or 00 00, then model vanishes
</td></tr>
<tr>
<td> 66
</td>
<td> 2 bytes
</td>
<td> Nothing?
</td></tr>
<tr>
<td> 68
</td>
<td> ...up to end
</td>
<td> Left null for storing some engine data AFTER loaded in-game
</td></tr></table>
<p>This might look difficult, but it's like multi-pointer file that starts at different location given by executable. See list at the beginning of this wiki to see which stages camera starts at which position (where FF8.exe really starts to read file as BattleStage) [FF8 stores whole file, even with useless data before camera]
If this still makes trouble, see this video: TODO
</p>
<h2> <span class="mw-headline" id="Camera_data"> Camera data </span></h2>
<p>Starts at ~0x5d4 (see How the engine handles this file?). 
[.text:00509820]
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Offset
</th>
<th style="background:rgb(204,204,204)"> Length
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> 0
</td>
<td> uInt16
</td>
<td> Fixed 02 00 (Unused in code)
</td></tr>
<tr>
<td> 2
</td>
<td> uInt16
</td>
<td> Relative jump to CameraSetting
</td></tr>
<tr>
<td> 4
</td>
<td> uInt16
</td>
<td> Relative jump to CameraAnimation
</td></tr>
<tr>
<td> 6
</td>
<td> uInt16
</td>
<td> Camera data size (starting from 0) [unused in code]
</td></tr>
<tr>
<td> 8
</td>
<td> 24 bytes
</td>
<td> Camera Settings
</td></tr>
<tr>
<td> 32
</td>
<td>&#160;?? bytes
</td>
<td> Cameras
</td></tr></table>
<p>Camera Setting:
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Offset
</th>
<th style="background:rgb(204,204,204)"> Length
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> 0
</td>
<td> char (based on disassembly)
</td>
<td> CameraAnimMode?
</td></tr>
<tr>
<td> 1
</td>
<td> byte?
</td>
<td> StopEnemyBeforeAnim?
</td></tr>
<tr>
<td> 2
</td>
<td> Bitfield? (1B)
</td>
<td> UHM?
</td></tr>
<tr>
<td> 3
</td>
<td>&#160;???
</td>
<td> DefaultEndofCameraPosition_Zoom?
</td></tr>
<tr>
<td> 4
</td>
<td>&#160;???
</td>
<td>&#160;???
</td></tr></table>
<p>Cameras:
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Offset
</th>
<th style="background:rgb(204,204,204)"> Length
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> 0
</td>
<td> uint16
</td>
<td> NumberOfCameras
</td></tr>
<tr>
<td> 2 *(Camera)
</td>
<td> uint16
</td>
<td> Relative pointer to camera animation
</td></tr>
<tr>
<td> 2 *(Camera)+ 2
</td>
<td> uint16
</td>
<td> Relative pointer to EOF
</td></tr>
<tr>
<td> 2 *(Camera) + 4
</td>
<td> CameraAnimation
</td>
<td> CameraAnimation
</td></tr></table>
<p>Camera Animation:
</p><p><br />
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Offset
</th>
<th style="background:rgb(204,204,204)"> Length
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> 0
</td>
<td> uint16
</td>
<td> NumOfKeypoints
</td></tr>
<tr>
<td> 2 *(KeypointID)
</td>
<td> uint16
</td>
<td> Relative pointer to camera Keypoint
</td></tr>
<tr>
<td> 2 *(NumOfKeypoints)+ 2
</td>
<td> uint16
</td>
<td> Camera EOF
</td></tr>
<tr>
<td> KeypointPointer
</td>
<td> Keyframe
</td>
<td> Keyframe
</td></tr></table>
<p>Keyframe:
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Offset
</th>
<th style="background:rgb(204,204,204)"> Length
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td>0
</td>
<td>UNKNOWN
</td>
<td>UNKNOWN
</td></tr></table>
<h2> <span class="mw-headline" id="Geometry"> Geometry </span></h2>
<p>Geometry contains groups, that contains Triangles and/or quads poligons. Models always stars at 01 00 01 00, and needs to be after camera data, either it's not model itself, but some other data. 
</p>
<h4> <span class="mw-headline" id="Group"> Group </span></h4>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Offset
</th>
<th style="background:rgb(204,204,204)"> Length
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> 0
</td>
<td> 4 bytes
</td>
<td> Always 01 00 01 00 / Header of object
</td></tr>
<tr>
<td> 4
</td>
<td> 2 bytes
</td>
<td> Uint16 / number of vertices.
</td></tr>
<tr>
<td> 6
</td>
<td> Number of vertices * 6
</td>
<td> Vertex data, short X; short Y; short Z;
</td></tr>
<tr>
<td> 6 + (Number of vertices *6)
</td>
<td> (AbsolutePosition MOD 4) + 2
</td>
<td> Padding
</td></tr>
<tr>
<td> varies (just after above)
</td>
<td> 2 bytes
</td>
<td> uint16 / number of triangles
</td></tr>
<tr>
<td> varies (just after above)
</td>
<td> 2 bytes
</td>
<td> uint16 / number of quads
</td></tr>
<tr>
<td> varies (just after above)
</td>
<td> 4 bytes
</td>
<td> padding
</td></tr>
<tr>
<td> varies (just after above)
</td>
<td> number of triangles * 20
</td>
<td> Triangle data. If NumOfTriangles = 0, then instead of any triangle data, there's quad data.
</td></tr>
<tr>
<td> varies (just after above)
</td>
<td> number of quads * 24
</td>
<td> Triangle data. If NumOfQuads = 0, then instead of any quad data, there's either next header 01 00 01 00, or end of group.
</td></tr></table>
<h5> <span class="mw-headline" id="Triangle"> Triangle </span></h5>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Name
</th>
<th style="background:rgb(204,204,204)"> Type
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> F1 (A)
</td>
<td> uint16
</td>
<td> A of face indice
</td></tr>
<tr>
<td> F2 (B)
</td>
<td> uint16
</td>
<td> B of face indice
</td></tr>
<tr>
<td> F3 (C)
</td>
<td> uint16
</td>
<td> C of face indice
</td></tr>
<tr>
<td> U1
</td>
<td> Byte
</td>
<td> U of first texture coordinate
</td></tr>
<tr>
<td> V1
</td>
<td> Byte
</td>
<td> V of first texture coordinate
</td></tr>
<tr>
<td> U2
</td>
<td> Byte
</td>
<td> U of second texture coordinate
</td></tr>
<tr>
<td> V2
</td>
<td> Byte
</td>
<td> V of second texture coordinate
</td></tr>
<tr>
<td> CLUT_ID
</td>
<td> UInt16 (BIT operated)*
</td>
<td> Index to CLUT_ID operated by BIT (see below)
</td></tr>
<tr>
<td> U3
</td>
<td> Byte
</td>
<td> U of third texture coordinate
</td></tr>
<tr>
<td> V3
</td>
<td> Byte
</td>
<td> V of third texture coordinate
</td></tr>
<tr>
<td> Special (see below / After QUAD table)
</td>
<td> 8 Byte
</td>
<td> See below (after QUAD table)
</td></tr>
<tr>
<td> Hide
</td>
<td> Byte/Bool
</td>
<td> Bool. Hides or shows texture
</td></tr>
<tr>
<td> Red
</td>
<td> Byte
</td>
<td> Texture colourization (Red)
</td></tr>
<tr>
<td> Green
</td>
<td> Byte
</td>
<td> Texture colourization (Green)
</td></tr>
<tr>
<td> Blue
</td>
<td> Byte
</td>
<td> Texture colourization (Blue)
</td></tr>
<tr>
<td> PSone GPU related
</td>
<td> Byte
</td>
<td> PSOne instruction
</td></tr></table>
<h5> <span class="mw-headline" id="Quad"> Quad </span></h5>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Name
</th>
<th style="background:rgb(204,204,204)"> Type
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> F1 (A)
</td>
<td> uint16
</td>
<td> A of face indice
</td></tr>
<tr>
<td> F2 (B)
</td>
<td> uint16
</td>
<td> B of face indice
</td></tr>
<tr>
<td> F3 (C)
</td>
<td> uint16
</td>
<td> C of face indice
</td></tr>
<tr>
<td> F4 (D)
</td>
<td> uint16
</td>
<td> D of face indice
</td></tr>
<tr>
<td> U1
</td>
<td> Byte
</td>
<td> U of first texture coordinate
</td></tr>
<tr>
<td> V1
</td>
<td> Byte
</td>
<td> V of first texture coordinate
</td></tr>
<tr>
<td> CLUT_ID
</td>
<td> UInt16 (BIT operated)*
</td>
<td> Index to CLUT_ID operated by BIT (see below)
</td></tr>
<tr>
<td> U2
</td>
<td> Byte
</td>
<td> U of second texture coordinate
</td></tr>
<tr>
<td> V2
</td>
<td> Byte
</td>
<td> V of second texture coordinate
</td></tr>
<tr>
<td> Special (see below)
</td>
<td> 8 Byte
</td>
<td> See below (after table)
</td></tr>
<tr>
<td> Hide
</td>
<td> Byte/Bool
</td>
<td> Bool. Hides or shows texture
</td></tr>
<tr>
<td> U3
</td>
<td> Byte
</td>
<td> U of third texture coordinate
</td></tr>
<tr>
<td> V3
</td>
<td> Byte
</td>
<td> V of third texture coordinate
</td></tr>
<tr>
<td> U4
</td>
<td> Byte
</td>
<td> U of fourth texture coordinate
</td></tr>
<tr>
<td> V4
</td>
<td> Byte
</td>
<td> V of fourth texture coordinate
</td></tr>
<tr>
<td> Red
</td>
<td> Byte
</td>
<td> Texture colourization (Red)
</td></tr>
<tr>
<td> Green
</td>
<td> Byte
</td>
<td> Texture colourization (Green)
</td></tr>
<tr>
<td> Blue
</td>
<td> Byte
</td>
<td> Texture colourization (Blue)
</td></tr>
<tr>
<td> PSone GPU related
</td>
<td> Byte
</td>
<td> PSOne instruction
</td></tr></table>
<p>Special Byte:
This byte, needs to be divided to two bytes. So, for example, a 0xE5 needs to be treated like two bytes:
0x0E
0x05
Other way is to treat first one as 6 BIT's, and second one as 2 BIT. 
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Singular of char
</th>
<th style="background:rgb(204,204,204)"> Example
</th>
<th style="background:rgb(204,204,204)"> Description
</th></tr>
<tr>
<td> First char/ 4 BIT
</td>
<td> B2 --&gt; 0B
</td>
<td> Unknown
</td></tr>
<tr>
<td> Second char / 4 BIT
</td>
<td> B2 --&gt; 02
</td>
<td> Texture page number
</td></tr></table>
<h4> <span class="mw-headline" id="CLUT_ID"> CLUT ID </span></h4>
<p>The most important bit's are the first two on one byte, and last two on last byte. Example:
00000000 00111100 (00 3C)
should be read like this:
00111100 00000000 (3C 00) 
And the CLUT ID is revealed by watching this four bits:
001111[00 00]000000
</p><p>Same applies to reading CLUT colors (16bits) where they are: 1b-T, 5b-B, 5b-G, 5b-R (Or RGBT if reordered as shown above)
</p><p>Complete list (without replacing bit order - as is in HEX editor/memory):
</p>
<table border="1" cellspacing="1" cellpadding="3" align="center" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> CLUT ID
</th>
<th style="background:rgb(204,204,204)"> BIT
</th>
<th style="background:rgb(204,204,204)"> HEX
</th></tr>
<tr>
<td> #1
</td>
<td> 00000000 00111100
</td>
<td> 00 3C
</td></tr>
<tr>
<td> #2
</td>
<td> 01000000 00111100
</td>
<td> 40 3C
</td></tr>
<tr>
<td> #3
</td>
<td> 10000000 00111100
</td>
<td> 80 3C
</td></tr>
<tr>
<td> #4
</td>
<td> 11000000 00111100
</td>
<td> C0 3C
</td></tr>
<tr>
<td> #5
</td>
<td> 00000000 00111101
</td>
<td> 00 3D
</td></tr>
<tr>
<td> #6
</td>
<td> 01000000 00111101
</td>
<td> 40 3D
</td></tr>
<tr>
<td> #7
</td>
<td> 10000000 00111101
</td>
<td> 80 3D
</td></tr>
<tr>
<td> #8
</td>
<td> 11000000 00111101
</td>
<td> C0 3D
</td></tr>
<tr>
<td> #9
</td>
<td> 00000000 00111110
</td>
<td> 00 3E
</td></tr>
<tr>
<td> #10
</td>
<td> 01000000 00111110
</td>
<td> 40 3E
</td></tr>
<tr>
<td> #11
</td>
<td> 10000000 00111110
</td>
<td> 80 3E
</td></tr>
<tr>
<td> #12
</td>
<td> 11000000 00111110
</td>
<td> C0 3E
</td></tr>
<tr>
<td> #13
</td>
<td> 00000000 00111111
</td>
<td> 00 3F
</td></tr>
<tr>
<td> #14
</td>
<td> 01000000 00111111
</td>
<td> 40 3F
</td></tr>
<tr>
<td> #15
</td>
<td> 10000000 00111111
</td>
<td> 80 3F
</td></tr>
<tr>
<td> #16
</td>
<td> 11000000 00111111
</td>
<td> C0 3F
</td></tr></table>
<h2> <span class="mw-headline" id="Texture"> Texture </span></h2>
<p>Contains one <a href="../PSX/TIM_format.html" title="PSX/TIM format">TIMs</a> with various size 512x256, 673x256, 768x256 (8BPP).
</p>
<h3> <span class="mw-headline" id="UV_calculation_algorithm"> UV calculation algorithm </span></h3>
<pre>Float U = (float)U_Byte / (float)(TIM_Texture_Width * 2) + ((float)Texture_Page/(TIM_Texture_Width * 2));
</pre>
<h3> <span class="mw-headline" id="Texture_page_calculation"> Texture page calculation </span></h3>
<pre>               Byte TPage = InputBytes[TexturePage_index] &amp; 0F; //Bitwise TPage byte AND 0F, to delete first 4 bits
               int TPageINT = TPage * 128; //For 16 bit TIM's, the texture page is 128 sized
</pre>
<p>Example:
0xB2 byte is:
2*128 = 256
</p>
<h3> <span class="mw-headline" id="Face_order_.2F_Translation.2F_triangulation"> Face order / Translation/ triangulation </span></h3>
<p><b>1.Quad wing order:</b>
</p>
<pre> ABCD ---&gt; ABDC
 example:
  f 1 2 3 4
 to:
  f 1 2 4 3
</pre>
<p><b>2.Quad triangulation face order</b>
</p>
<pre> ABDC &gt; ABD
        ACD (same for VT)
 example:
 f 1 2 4 3
 to:
 f 1 2 4
 f 1 3 4
</pre>
<p>
3.Triangles VT order:
</p>
<pre> A/T1 &gt; A/T2
 B/T2 &gt; B/T3
 C/T3 &gt; C/T1
 Example:
 (Also with quad triangulation face order!)
 f 1/1 2/2 7/4 6/3
 to:
 f 1/1 2/2 7/4
 f 1/1 6/3 7/4
 where:
 A=1 B=2 C=6 D=7
</pre>
<!-- 
NewPP limit report
Preprocessor visited node count: 47/1000000
Preprocessor generated node count: 52/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key qhimm_wiki:pcache:idhash:1781-0!*!0!!en!*!* and timestamp 20160922111936 -->
</div>				<!-- /bodycontent -->
								<!-- printfooter -->
				<div class="printfooter">
				Retrieved from "<a href="http://wiki.qhimm.com/index.php?title=FF8/FileFormat_X&amp;oldid=5249">http://wiki.qhimm.com/index.php?title=FF8/FileFormat_X&amp;oldid=5249</a>"				</div>
				<!-- /printfooter -->
												<!-- catlinks -->
				<div id='catlinks' class='catlinks catlinks-allhidden'></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
				<!-- debughtml -->
								<!-- /debughtml -->
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>Personal tools</h5>
	<ul>
		<li id="pt-login"><a href="http://wiki.qhimm.com/index.php?title=Special:UserLogin&amp;returnto=FF8%2FFileFormat+X" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
	</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>Namespaces</h5>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="FileFormat_X.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk"><span><a href="../Talk%253AFF8/FileFormat_X.html"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
	<h4>
		</h4>
	<h5><span>Variants</span><a href="FileFormat_X.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>Views</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="FileFormat_X.html" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="http://wiki.qhimm.com/edit/FF8/FileFormat_X"  title="This page is protected.&#13;&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qhimm.com/history/FF8/FileFormat_X"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
	<h5><span>Actions</span><a href="FileFormat_X.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">Search</label></h5>
	<form action="http://wiki.qhimm.com/index.php" id="searchform">
				<div>
			<input type="search" name="search" title="Search QhimmWiki [f]" accesskey="f" id="searchInput" />			<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />			<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />					<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(../../skins/wiki.png);" href="../Main_Page.html"  title="Visit the main page"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" id='p-navigation'>
	<h5>Navigation</h5>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-portal"><a href="http://wiki.qhimm.com/view/QhimmWiki:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
			<li id="n-currentevents"><a href="http://wiki.qhimm.com/view/QhimmWiki:Current_events" title="Find background information on current events">Current events</a></li>
			<li id="n-recentchanges"><a href="../Special%253ARecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="../Special%253ARandom.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="../Help%253AContents.html" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>

<!-- /navigation -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" id='p-tb'>
	<h5>Toolbox</h5>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="../Special%253AWhatLinksHere/FF8/FileFormat_X.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="../Special%253ARecentChangesLinked/FF8/FileFormat_X.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="../Special%253ASpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="http://wiki.qhimm.com/index.php?title=FF8/FileFormat_X&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="http://wiki.qhimm.com/index.php?title=FF8/FileFormat_X&amp;oldid=5249" title="Permanent link to this revision of the page">Permanent link</a></li>
		</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 27 August 2016, at 14:35.</li>
											<li id="footer-info-viewcount">This page has been accessed 4,859 times.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" href="http://creativecommons.org/licenses/by-nc-sa/2.5/">Attribution-NonCommercial-ShareAlike</a>.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="http://wiki.qhimm.com/view/QhimmWiki:Privacy_policy" title="QhimmWiki:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="http://wiki.qhimm.com/view/QhimmWiki:About" title="QhimmWiki:About">About QhimmWiki</a></li>
											<li id="footer-places-disclaimer"><a href="../QhimmWiki%253AGeneral_disclaimer.html" title="QhimmWiki:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/"><img src="http://creativecommons.org/images/public/somerights20.gif" alt="Attribution-NonCommercial-ShareAlike" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="../../load.php@debug=false&amp;lang=en&amp;modules=skins.vector&amp;only=scripts&amp;skin=vector&amp;%252A"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest"], null, true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.118 secs. -->
	</body>
</html>
