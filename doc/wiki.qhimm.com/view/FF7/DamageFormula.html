<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>FF7/DamageFormula - QhimmWiki</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.20.2" />
<link rel="shortcut icon" href="http://wiki.qhimm.com/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qhimm.com/opensearch_desc.php" title="QhimmWiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qhimm.com/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/2.5/" />
<link rel="alternate" type="application/atom+xml" title="QhimmWiki Atom feed" href="http://wiki.qhimm.com/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="../../load.php@debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cskins.vector&amp;only=styles&amp;skin=vector&amp;%252A.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qhimm_wiki:resourceloader:filter:minify-css:7:9f75cd7a214f5d1850ed6d0df1a4a089 */</style>

<script src="../../load.php@debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;%252A"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"FF7/DamageFormula","wgTitle":"FF7/DamageFormula","wgCurRevisionId":5124,"wgArticleId":1387,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"FF7/DamageFormula","wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,
"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","watchToken":false});;},{},{});
/* cache key: qhimm_wiki:resourceloader:filter:minify-js:7:7330ebaa3a8da3f7992caf476ddb8efd */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-FF7_DamageFormula skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content" class="mw-body">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading"><span dir="auto">FF7/DamageFormula</span></h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
								<!-- tagline -->
				<div id="siteSub">From QhimmWiki</div>
				<!-- /tagline -->
								<!-- subtitle -->
				<div id="contentSub"><span class="subpages">&lt; <a href="../FF7.html" title="FF7">FF7</a></span></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="DamageFormula.html#mw-head">navigation</a>, 					<a href="DamageFormula.html#p-search">search</a>
				</div>
				<!-- /jumpto -->
								<!-- bodycontent -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="DamageFormula.html#Accuracy_Function_considerations"><span class="tocnumber">1</span> <span class="toctext">Accuracy Function considerations</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="DamageFormula.html#Damage_Calculations"><span class="tocnumber">2</span> <span class="toctext">Damage Calculations</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="DamageFormula.html#Standard_Formulae"><span class="tocnumber">2.1</span> <span class="toctext">Standard Formulae</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="DamageFormula.html#X0:"><span class="tocnumber">2.1.1</span> <span class="toctext">X0:</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="DamageFormula.html#X1:"><span class="tocnumber">2.1.2</span> <span class="toctext">X1:</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="DamageFormula.html#X2:"><span class="tocnumber">2.1.3</span> <span class="toctext">X2:</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="DamageFormula.html#X3:"><span class="tocnumber">2.1.4</span> <span class="toctext">X3:</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="DamageFormula.html#X4:"><span class="tocnumber">2.1.5</span> <span class="toctext">X4:</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="DamageFormula.html#X5:"><span class="tocnumber">2.1.6</span> <span class="toctext">X5:</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="DamageFormula.html#X6:"><span class="tocnumber">2.1.7</span> <span class="toctext">X6:</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="DamageFormula.html#X7:"><span class="tocnumber">2.1.8</span> <span class="toctext">X7:</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="DamageFormula.html#X8:"><span class="tocnumber">2.1.9</span> <span class="toctext">X8:</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="DamageFormula.html#X9:"><span class="tocnumber">2.1.10</span> <span class="toctext">X9:</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="DamageFormula.html#XA:"><span class="tocnumber">2.1.11</span> <span class="toctext">XA:</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="DamageFormula.html#Additional_Checks"><span class="tocnumber">2.2</span> <span class="toctext">Additional Checks</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="DamageFormula.html#Sadness.28_Damage_.29"><span class="tocnumber">2.2.1</span> <span class="toctext">Sadness( Damage )</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="DamageFormula.html#SplitDamage.28_Damage.2C_multiNoSplit_.29"><span class="tocnumber">2.2.2</span> <span class="toctext">SplitDamage( Damage, multiNoSplit )</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="DamageFormula.html#Barrier.28_Damage_.29"><span class="tocnumber">2.2.3</span> <span class="toctext">Barrier( Damage )</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="DamageFormula.html#Variance.28_Damage_.29:"><span class="tocnumber">2.2.4</span> <span class="toctext">Variance( Damage ):</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-20"><a href="DamageFormula.html#Secondary_Damage_Formulae"><span class="tocnumber">2.3</span> <span class="toctext">Secondary Damage Formulae</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="DamageFormula.html#X0:_2"><span class="tocnumber">2.3.1</span> <span class="toctext">X0:</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="DamageFormula.html#X1:_2"><span class="tocnumber">2.3.2</span> <span class="toctext">X1:</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="DamageFormula.html#X8:_2"><span class="tocnumber">2.3.3</span> <span class="toctext">X8:</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="DamageFormula.html#X9"><span class="tocnumber">2.3.4</span> <span class="toctext">X9</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="DamageFormula.html#XA"><span class="tocnumber">2.3.5</span> <span class="toctext">XA</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="DamageFormula.html#XB"><span class="tocnumber">2.3.6</span> <span class="toctext">XB</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="DamageFormula.html#XC"><span class="tocnumber">2.3.7</span> <span class="toctext">XC</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="DamageFormula.html#XD"><span class="tocnumber">2.3.8</span> <span class="toctext">XD</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="DamageFormula.html#Accuracy_Functions"><span class="tocnumber">3</span> <span class="toctext">Accuracy Functions</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="DamageFormula.html#0:_Physical_Accuracy_Check"><span class="tocnumber">3.1</span> <span class="toctext">0: Physical Accuracy Check</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="DamageFormula.html#1:_Magical_Accuracy_Check"><span class="tocnumber">3.2</span> <span class="toctext">1: Magical Accuracy Check</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="DamageFormula.html#2:_Critical_Hit_Check"><span class="tocnumber">3.3</span> <span class="toctext">2: Critical Hit Check</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="DamageFormula.html#6:_Manipulate_Accuracy_.28intended_solely_for_playable_characters.29"><span class="tocnumber">3.4</span> <span class="toctext">6: Manipulate Accuracy (intended solely for playable characters)</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="DamageFormula.html#7:_Level-based_Accuracy"><span class="tocnumber">3.5</span> <span class="toctext">7: Level-based Accuracy</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Accuracy_Function_considerations">Accuracy Function considerations</span></h2>
<p>Each of the upper nybble of the damage calculation determines what checks are done to accuracy of the action and whether or not it will connect, be critical or miss. Here are the functions in order processed based on the upper nybble:
</p>
<table border="1" cellspacing="1" cellpadding="3" style="border: 1px solid black; border-collapse: collapse;">
<tr>
<th style="background:rgb(204,204,204)"> Upper Nybble
</th>
<th style="background:rgb(204,204,204)"> Functions
</th></tr>
<tr>
<td> 0
</td>
<td> None (always hits)
</td></tr>
<tr>
<td> 1
</td>
<td> <a href="DamageFormula.html#0:_Physical_Accuracy_Check" title="FF7/DamageFormula">Physical Accuracy</a>, <a href="DamageFormula.html#2:_Critical_Hit_Check" title="FF7/DamageFormula">Critical Check</a>
</td></tr>
<tr>
<td> 2
</td>
<td> <a href="DamageFormula.html#1:_Magical_Accuracy_Check" title="FF7/DamageFormula">Magical Accuracy</a>
</td></tr>
<tr>
<td> 3
</td>
<td> Dummy [3] (always hits)
</td></tr>
<tr>
<td> 4
</td>
<td> Dummy [4] (always hits)
</td></tr>
<tr>
<td> 5
</td>
<td> Dummy [5] (always hits)
</td></tr>
<tr>
<td> 6
</td>
<td> <a href="DamageFormula.html#0:_Physical_Accuracy_Check" title="FF7/DamageFormula">Physical Accuracy</a>, <a href="DamageFormula.html#2:_Critical_Hit_Check" title="FF7/DamageFormula">Critical Check</a>
</td></tr>
<tr>
<td> 7
</td>
<td> <a href="DamageFormula.html#1:_Magical_Accuracy_Check" title="FF7/DamageFormula">Magical Accuracy</a>
</td></tr>
<tr>
<td> 8
</td>
<td> <a href="DamageFormula.html#7:_Level-based_Accuracy" title="FF7/DamageFormula">Level-based Accuracy</a>
</td></tr>
<tr>
<td> 9
</td>
<td> <a href="DamageFormula.html#6:_Manipulate_Accuracy_.28intended_solely_for_playable_characters.29" title="FF7/DamageFormula">Manipulate</a>
</td></tr>
<tr>
<td> A
</td>
<td> <a href="DamageFormula.html#0:_Physical_Accuracy_Check" title="FF7/DamageFormula">Physical Accuracy</a>, <a href="DamageFormula.html#2:_Critical_Hit_Check" title="FF7/DamageFormula">Critical Check</a>
</td></tr>
<tr>
<td> B
</td>
<td> <a href="DamageFormula.html#0:_Physical_Accuracy_Check" title="FF7/DamageFormula">Physical Accuracy</a>
</td></tr>
<tr>
<td> C
</td>
<td> None (always hits)
</td></tr>
<tr>
<td> D
</td>
<td> None (always hits)
</td></tr>
<tr>
<td> E
</td>
<td> None (always hits)
</td></tr>
<tr>
<td> F
</td>
<td> None (always hits)
</td></tr></table>
<h1> <span class="mw-headline" id="Damage_Calculations">Damage Calculations</span></h1>
<p>These are the damage functions according to an unmodded FF7-ENG 1.02 (1998)
</p>
<h2> <span class="mw-headline" id="Standard_Formulae">Standard Formulae</span></h2>
<h3> <span class="mw-headline" id="X0:">X0:</span></h3>
<p><i>0x5DE5C0</i>
</p>
<pre>Sets Target's 02h flag to 1. (Unknown effect)</pre>
<h3> <span class="mw-headline" id="X1:">X1:</span></h3>
<p><i>0x5DE5DF</i>
</p>
<pre>If Attack Property &quot;Always Critical&quot; is Set
	Set Critical Damage Flag
End If

x = ( Actor's Level * Actor's (M)Attack ) / 32
y = ( Actor's Level + Actor's (M)Attack ) / 32
z = Actor's (M)Attack + ( x * y )
z = z * ( 512 - target's defense ) * Attack's Power
Damage = z &gt;&gt; 13
//This is a bit-shift left by 13 which is mathematically equivalent to dividing by 8192, but it's important to note that it doesn't actually divide as this is the source of the damage overflow glitch

If Critical Damage Flag is set
	Damage = Damage * 2
End If

If Actor's Statuses include Berserk
	Damage = Damage * 3 / 2
End If

Long_Range = 0
If Target is in Back Row
	Set Long_Range = 1
End If

If Attack is Short Range OR Command is Enemy Attack
	If Actor is in Back Row
		Long_Range = 1
	End If
Else
	Long_Range = 0
End If

If Long_Range&#160;!= 0
	Damage = Damage / 2
End If

If Target is Defending
	Damage = Damage / 2
End If

If Target's Back is exposed
	Damage = Damage * ( Target's Back Attack Modifier / 8 )
End If

If Actor's Statuses includes Frog
	Damage = Damage / 4
End If

Damage = Sadness( Damage )
Damage = Split( Damage, 0 )
Damage = Barrier( Damage )
  
If Actor's Statuses include Mini
	Damage = 0
End If
Damage = Variance( Damage )</pre>
<h3> <span class="mw-headline" id="X2:">X2:</span></h3>
<p><i>0x5DE9B8</i>
</p>
<pre>
multiNoSplit = ( ( ( Attack's Target Flags AND Ch ) - 4 ) == 0&#160;? 1&#160;: 0 )
Base = (Actor's Attack + Actor's Level) * 6
Damage = (512 - Target's Defense) * Base * Attack's Power / 8192
Damage = Sadness( Damage )
Damage = SplitDamage( Damage, multiNoSplit )
Damage = Barrier( Damage )
Damage = Variance( Damage )
</pre>
<h3> <span class="mw-headline" id="X3:">X3:</span></h3>
<p><i>0x5DEA6D</i>
</p>
<pre>
If Attack Properties Damage MP is clear
	Damage = Target's HP
Else
	Damage = Target's MP
End If

Damage = Damage * Attack's Power / 32

If ActionData[AC]&#160;!= 0 (?)
	Damage = Damage / 2
End If</pre>
<h3> <span class="mw-headline" id="X4:">X4:</span></h3>
<p><i>0x5DEAF7</i>
</p>
<pre>If Attack Properties Damage MP is clear
	Damage = Target's MHP
Else
	Damage = Target's MMP
End If

Damage = Damage * Attack's Power / 32

If ActionData[AC]&#160;!= 0 (?)
	Damage = Damage / 2
End If
</pre>
<h3> <span class="mw-headline" id="X5:">X5:</span></h3>
<p><i>0x5DEB81</i>
</p>
<pre>
Damage = (Actor's (M)Attack + Actor's Level) * 6 + (Attack's Power * 22)
Damage = SplitDamage( Damage )
Damage = Barrier( Damage )
Damage = Variance( Damage )</pre>
<h3> <span class="mw-headline" id="X6:">X6:</span></h3>
<p><i>0x5DEBE5</i>
</p>
<pre>Damage = Attack's Power * 20</pre>
<h3> <span class="mw-headline" id="X7:">X7:</span></h3>
<p><i>0x5DEC0A</i>
</p>
<pre>
Damage = ( ( 512 - Target's Def ) * Attack's Power / 32 )
Damage = Variance( Damage )
</pre>
<h3> <span class="mw-headline" id="X8:">X8:</span></h3>
<p><i>0x5DEC52</i>
</p>
<pre>
If ActionData[0x230] AND 40h
	ActionData[0x230] = 1
Else
	ActionData[0x230] = 80h
End If
//presumably this checks if the target heals from restore element and will either recover or kill based on the result</pre>
<h3> <span class="mw-headline" id="X9:">X9:</span></h3>
<p><i>0x5DEC8A</i>
</p>
<pre>
Actor's Attack = Actor's Strength * 2
Use Damage X1 with adjusted stat
</pre>
<h3> <span class="mw-headline" id="XA:">XA:</span></h3>
<p><i>0x5DECAA</i>
</p>
<pre>Damage = ( Attack's Power + Number of Targets - 1 ) / Number of Targets</pre>
<h2> <span class="mw-headline" id="Additional_Checks">Additional Checks</span></h2>
<h3> <span class="mw-headline" id="Sadness.28_Damage_.29">Sadness( Damage )</span></h3>
<p><i>0x5DE958</i>
</p>
<pre>
If Target's Status includes Sadness
	Damage = Damage - (Damage * 3 / 10)
End If
Return Damage</pre>
<h3> <span class="mw-headline" id="SplitDamage.28_Damage.2C_multiNoSplit_.29">SplitDamage( Damage, multiNoSplit )</span></h3>
<p><i>0x5DE8F4</i>
</p>
<pre>
If multiNoSplit == 0
	If No. of Attack's Targets &gt;= 2
		Set Attack's split damage Target Flag
	Else
		Set multiNoSplit == 1
	End If
End If

If ActionData[0xAC] == 0
	Damage = Damage / 2
Else
	If multiNoSplit == 0
		Damage = Damage * 3 / 2
	End If
End If
Return Damage
</pre>
<h3> <span class="mw-headline" id="Barrier.28_Damage_.29">Barrier( Damage )</span></h3>
<p><i>0x5DE82C</i>
</p>
<pre>
If Attack Property &quot;Physical&quot; is 0
	If Target's Statuses include MBarrier
		Set ActionData &quot;MBarrier Active&quot; flag
	End If
Else
	If Target's Statuses include Barrier
		Set ActionData &quot;Barrier Active&quot; flag
	End If
End If

If ActionData &quot;MBarrier Active&quot; or &quot;Barrier Active&quot; flags are set
	Damage = Damage / 2
End If

If attack is Magic and EnabledMagic[7] == 0 (?)
	Damage = Damage + ( Damage * ( EnabledMagic[7] * (10 / 32) ) / 100 )
End If
Return Damage
</pre>
<h3> <span class="mw-headline" id="Variance.28_Damage_.29:">Variance( Damage ):</span></h3>
<p><i>0x5DE988</i>
</p>
<pre>
Damage = Damage ([0..255] + 3841) &gt;&gt; 12  //from RNGLUT in KERNEL.BIN
//Again, we have another chance for overflow.

If Damage == 0
	Damage == 1
End If
Return Damage
</pre>
<h2> <span class="mw-headline" id="Secondary_Damage_Formulae">Secondary Damage Formulae</span></h2>
<h3> <span class="mw-headline" id="X0:_2">X0:</span></h3>
<p><i>0x5DECFB</i>
</p>
<pre>
Damage = Attacker's HP
</pre>
<h3> <span class="mw-headline" id="X1:_2">X1:</span></h3>
<p><i>5DED1E</i>
</p>
<pre>
Damage = Attacker's MHP - Attacker's HP
</pre>
<h3> <span class="mw-headline" id="X8:_2">X8:</span></h3>
<p><i>0x5DED73</i>
</p>
<pre>
Dice_Count = Attacker's Level / 10

If Dice_Count &lt; 2 then
	Dice_Count = 2
Elseif Dice_Count &gt; 6
	Dice_Count = 6
End If

total_dice_roll = 0
For ( d_loop = 0; d_loop &lt; Dice_Count; d_loop++ )
	die = [0..5]
	all_dice[d_loop] = die
	total_dice_roll += die + 1

	set die visualization based on roll
Loop

value_repeat = 0
For ( d_value = 0; d_value &lt; 6; d_value++ )

	repeat_count = 0
	For ( d_loop = 0; d_loop &lt; Dice_Count; d_loop++ )

		If all_dice[d_loop] = d_value then
			repeat_count++
		End If
	Loop

	If repeat_count &gt; value_repeat then
		value_repeat = repeat_count
	End If

Loop

Damage = value_repeat * 100 * total_dice_roll
</pre>
<h3> <span class="mw-headline" id="X9">X9</span></h3>
<p><i>0x5DEEEF</i>
</p>
<pre>
Damage = Number of Successful Escapes
</pre>
<h3> <span class="mw-headline" id="XA">XA</span></h3>
<p><i>0x5DEF1D</i>
</p>
<pre>
Damage = Target's HP - 1
</pre>
<h3> <span class="mw-headline" id="XB">XB</span></h3>
<p><i>0x5DEF44</i>
</p>
<pre>
Damage = (Game Time Hours * 100) + (Game Time Minutes)
</pre>
<h3> <span class="mw-headline" id="XC">XC</span></h3>
<p><i>0x5DEF88</i>
</p>
<pre>
Damage = Target's Kill Count * 10
//This is intended to be used only on players
//This will cause a memory leak if done on enemies
</pre>
<h3> <span class="mw-headline" id="XD">XD</span></h3>
<p><i>0x5DEFDD</i>
</p>
<pre>
If target is playable character
	MateriaCount = 0;
	For ( MateriaLoop = 0; MateriaLoop &lt; 8; MateriaLoop++ )
		If target has materia in weapon slot [MateriaLoop] then MateriaCount++
		If target has materia in armor slot [MateriaLoop] then MateriaCount++
	Loop
	Damage = MateriaCount * 1111
End If
</pre>
<h1> <span class="mw-headline" id="Accuracy_Functions">Accuracy Functions</span></h1>
<p>The point of these is to set the "attack will miss" flag in the current action memory structure.
</p>
<h3> <span class="mw-headline" id="0:_Physical_Accuracy_Check">0: Physical Accuracy Check</span></h3>
<p><i>0x5DDBB0</i>
</p>
<pre>
todo
It's long so I'll tackle it when I have a lot of time on my hands
</pre>
<h3> <span class="mw-headline" id="1:_Magical_Accuracy_Check">1: Magical Accuracy Check</span></h3>
<p><i>0x5DDE5E</i>
</p>
<pre>
acc = Action's Accuracy
tar_save = level / 2; //rounded down
acc_bonus = actor's level - tar_save
rand_0 = [0..99]
rand_1 = [0..99]
if acc &lt; 255 then
   if target does not have instant-death, null, or heal properties to current attack then
      if attack is not (reflectable and target in reflect status) then
         if attack does not inflict statuses or inflicting status include: Death, Sleep, Confu, Stop, Petrify, or Paralysis then
            acc = Fury_Adj( acc );
            if target's M_Evade &gt; rand_0 OR
                acc + acc_bonus &lt; rand_1 then
               Set action miss flag
            end if
         end if
      end if
   end if
end if
</pre>
<h3> <span class="mw-headline" id="2:_Critical_Hit_Check">2: Critical Hit Check</span></h3>
<p><i>0x5DDF8E</i>
</p>
<pre>
If attack does not miss then
   if actor in lucky girl status then
      critical_chance = 255
   else
      critical_chance = ((actor's luck + actor's level) - target's level ) &gt;&gt; 2;
      if actor is playable character then
         critical_chance += weapon's critical bonus //?
      end if
      Critical_random = ( ( [0..65535] * 99 ) / 65535 ) + 1;
      if critical_chance &gt; critical_random then
         attack set to critical
      end if
   end if
end if
</pre>
<p>3, 4, and 5 don't exist. Since they don't set miss they will always hit.
</p>
<h3> <span class="mw-headline" id="6:_Manipulate_Accuracy_.28intended_solely_for_playable_characters.29">6: Manipulate Accuracy (intended solely for playable characters)</span></h3>
<p><i>0x5DE0D0</i>
</p>
<pre>
int ally_loop;
ManipSuccess = 0;
for ( ally_loop = 0; ally_loop &lt; 3; ally_loop++ )
{
   if target is currently under manipulation by an actor then
      break;
   end if
}
if target is not currently being manipulated AND
    target is not a playable character AND
    target is an enemy AND
    actor is not currently manipulating an enemy AND
    target is not under manipulate status AND
    target's timer bar is running AND //like they're not stopped, petrified, etc
    target's attack resistance is &quot;always-hit&quot; then //?
   Manip_Chance = actor's level + 50 - target's level; //no less than 0
   if target count &gt; 1 then
      Manip_Chance = ( Manip_Chance &lt;&lt; 2 ) / 5;
   end if
   if actor's [0xAC] == 0 then
      Manip_Chance &gt;&gt; 1;
   end if
   if target's attack resistance is &quot;always-hit&quot; then
      Manip_Chance = 255;
   end if
   if actor's accessory property == 5 //&quot;Increase manip rate&quot; property on Hypnocrown
      if Manip_Chance &lt; 100 then
         Manip_Chance = 100;
      end if
   end if
   If Manip_Chance &gt; [0..99] then
      ManipSuccess = 1;
   end if
end if
If ManipSuccess == 1 then
   Set actor's manipulated enemy to target
   Display String 5Ah {&quot;Manipulated &lt;Enemy&gt;&quot;}
   Clear Actor's 0xE4 value //unknown
else
   Set attack missed
end if
</pre>
<p>This doesn't actually place the target in the manipulate status. That happens elsewhere.
</p>
<h3> <span class="mw-headline" id="7:_Level-based_Accuracy">7: Level-based Accuracy</span></h3>
<p><i>0x5DE08A</i>
</p>
<pre>
If Action's Accuracy &gt; 0 then
   If the remainder of ( Target's level / Action accuracy ) is non-zero then
      Set attack missed
   end if
end if
</pre>
<p>So if the accuracy IS 0, then it will always hit. This is to prevent a divide by zero error.
</p>
<!-- 
NewPP limit report
Preprocessor visited node count: 380/1000000
Preprocessor generated node count: 700/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key qhimm_wiki:pcache:idhash:1387-0!*!0!!en!*!* and timestamp 20160922103523 -->
</div>				<!-- /bodycontent -->
								<!-- printfooter -->
				<div class="printfooter">
				Retrieved from "<a href="http://wiki.qhimm.com/index.php?title=FF7/DamageFormula&amp;oldid=5124">http://wiki.qhimm.com/index.php?title=FF7/DamageFormula&amp;oldid=5124</a>"				</div>
				<!-- /printfooter -->
												<!-- catlinks -->
				<div id='catlinks' class='catlinks catlinks-allhidden'></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
				<!-- debughtml -->
								<!-- /debughtml -->
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>Personal tools</h5>
	<ul>
		<li id="pt-login"><a href="http://wiki.qhimm.com/index.php?title=Special:UserLogin&amp;returnto=FF7%2FDamageFormula" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
	</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>Namespaces</h5>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="DamageFormula.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.qhimm.com/edit/Talk:FF7/DamageFormula?redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
	<h4>
		</h4>
	<h5><span>Variants</span><a href="DamageFormula.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>Views</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="DamageFormula.html" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="http://wiki.qhimm.com/edit/FF7/DamageFormula"  title="This page is protected.&#13;&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qhimm.com/history/FF7/DamageFormula"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
	<h5><span>Actions</span><a href="DamageFormula.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">Search</label></h5>
	<form action="http://wiki.qhimm.com/index.php" id="searchform">
				<div>
			<input type="search" name="search" title="Search QhimmWiki [f]" accesskey="f" id="searchInput" />			<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />			<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />					<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(../../skins/wiki.png);" href="../Main_Page.html"  title="Visit the main page"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" id='p-navigation'>
	<h5>Navigation</h5>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-portal"><a href="http://wiki.qhimm.com/view/QhimmWiki:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
			<li id="n-currentevents"><a href="http://wiki.qhimm.com/view/QhimmWiki:Current_events" title="Find background information on current events">Current events</a></li>
			<li id="n-recentchanges"><a href="../Special%253ARecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="../Special%253ARandom.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="../Help%253AContents.html" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>

<!-- /navigation -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" id='p-tb'>
	<h5>Toolbox</h5>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="../Special%253AWhatLinksHere/FF7/DamageFormula.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="../Special%253ARecentChangesLinked/FF7/DamageFormula.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="../Special%253ASpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="http://wiki.qhimm.com/index.php?title=FF7/DamageFormula&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="http://wiki.qhimm.com/index.php?title=FF7/DamageFormula&amp;oldid=5124" title="Permanent link to this revision of the page">Permanent link</a></li>
		</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 29 February 2016, at 13:00.</li>
											<li id="footer-info-viewcount">This page has been accessed 12,945 times.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" href="http://creativecommons.org/licenses/by-nc-sa/2.5/">Attribution-NonCommercial-ShareAlike</a>.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="http://wiki.qhimm.com/view/QhimmWiki:Privacy_policy" title="QhimmWiki:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="http://wiki.qhimm.com/view/QhimmWiki:About" title="QhimmWiki:About">About QhimmWiki</a></li>
											<li id="footer-places-disclaimer"><a href="../QhimmWiki%253AGeneral_disclaimer.html" title="QhimmWiki:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/"><img src="http://creativecommons.org/images/public/somerights20.gif" alt="Attribution-NonCommercial-ShareAlike" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="../../load.php@debug=false&amp;lang=en&amp;modules=skins.vector&amp;only=scripts&amp;skin=vector&amp;%252A"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest"], null, true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.112 secs. -->
	</body>
</html>
