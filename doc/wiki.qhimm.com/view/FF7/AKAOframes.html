<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>FF7/AKAOframes - QhimmWiki</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.20.2" />
<link rel="shortcut icon" href="http://wiki.qhimm.com/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qhimm.com/opensearch_desc.php" title="QhimmWiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qhimm.com/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/2.5/" />
<link rel="alternate" type="application/atom+xml" title="QhimmWiki Atom feed" href="http://wiki.qhimm.com/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="../../load.php@debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cskins.vector&amp;only=styles&amp;skin=vector&amp;%252A.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qhimm_wiki:resourceloader:filter:minify-css:7:9f75cd7a214f5d1850ed6d0df1a4a089 */</style>

<script src="../../load.php@debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;%252A"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"FF7/AKAOframes","wgTitle":"FF7/AKAOframes","wgCurRevisionId":3971,"wgArticleId":1339,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"FF7/AKAOframes","wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,
"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","watchToken":false});;},{},{});
/* cache key: qhimm_wiki:resourceloader:filter:minify-js:7:7330ebaa3a8da3f7992caf476ddb8efd */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-FF7_AKAOframes skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content" class="mw-body">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading"><span dir="auto">FF7/AKAOframes</span></h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
								<!-- tagline -->
				<div id="siteSub">From QhimmWiki</div>
				<!-- /tagline -->
								<!-- subtitle -->
				<div id="contentSub"><span class="subpages">&lt; <a href="../FF7.html" title="FF7">FF7</a></span></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="AKAOframes.html#mw-head">navigation</a>, 					<a href="AKAOframes.html#p-search">search</a>
				</div>
				<!-- /jumpto -->
								<!-- bodycontent -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="AKAOframes.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="AKAOframes.html#AKAO_frame_structure"><span class="tocnumber">2</span> <span class="toctext">AKAO frame structure</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="AKAOframes.html#Header_.28size:_16_bytes.29"><span class="tocnumber">2.1</span> <span class="toctext">Header (size: 16 bytes)</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="AKAOframes.html#Channel_info_.28size:_4_bytes_.2B_2_bytes_.2A_.3Cchannels_count.3E.29"><span class="tocnumber">2.2</span> <span class="toctext">Channel info (size: 4 bytes + 2 bytes * &lt;channels count&gt;)</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="AKAOframes.html#Channel_Commands_.5BAKAO_Opcodes.5D"><span class="tocnumber">2.3</span> <span class="toctext">Channel Commands [AKAO Opcodes]</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="AKAOframes.html#Example_.28home-created_AKAO_frame.29:"><span class="tocnumber">3</span> <span class="toctext">Example (home-created AKAO frame):</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="AKAOframes.html#Header"><span class="tocnumber">3.1</span> <span class="toctext">Header</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="AKAOframes.html#Channel_info"><span class="tocnumber">3.2</span> <span class="toctext">Channel info</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="AKAOframes.html#Channel_commands"><span class="tocnumber">3.3</span> <span class="toctext">Channel commands</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="AKAOframes.html#Sound_Opcode_list"><span class="tocnumber">4</span> <span class="toctext">Sound Opcode list</span></a></li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Introduction"> Introduction </span></h1>
<p>AKAO frames are most complicated frames in FF7 sound system.
("AKAO" is frame magic, probably developed by Minoru Akao, Square Enix sound programmer&#160;:) )
</p><p>Frame is similar to MIDI sequence - it's custom tracker format for playing sequence sound, well tuned specially for PSX.
</p><p>This frames are in all FF7 game modules: Field, Battle, Worldmap and in minigames.
</p><p>All files with exension *.SND are AKAO.
</p><p><b>MINI/ASERI2.SND</b> - Battle Arena theme
</p><p><b>MINI/SENSUI.SND</b> - used in Submarine minigame
</p><p><b>ENEMY6/OVER2.SND</b> - game over sequence
</p><p><b>ENEMY6/FAN2.SND</b> - battle win "fanfare" sequence
</p><p><b>MOVIE/OVER2.SND</b> - same game over sequence, don't know, why to duplicate data
</p><p><br />
Other AKAO frames are hard-wired in other files.
</p><p><br />
</p>
<h1> <span class="mw-headline" id="AKAO_frame_structure"> AKAO frame structure </span></h1>
<h2> <span class="mw-headline" id="Header_.28size:_16_bytes.29"> Header (size: 16 bytes) </span></h2>
<p>struct AkaoHeader
</p><p>{
</p>
<pre>   static const uint8_t magic[4]; // "AKAO" C-string aka frame *MAGIC*
   uint16_t id;                   // frame ID, used for playing sequence
   uint16_t length;               // frame length - sizeof(header)
   uint8_t unknown[8];            // some numbers, can't find their usage
</pre>
<p>};
</p>
<h2> <span class="mw-headline" id="Channel_info_.28size:_4_bytes_.2B_2_bytes_.2A_.3Cchannels_count.3E.29"> Channel info (size: 4 bytes + 2 bytes * &lt;channels count&gt;) </span></h2>
<p>First there is 32-bit number (offset 0x10), which represents bitmask of used channels in this frame, after this frame there is &lt;channels count&gt; offsets to channel opcode data counting from current offset.
</p>
<h2> <span class="mw-headline" id="Channel_Commands_.5BAKAO_Opcodes.5D"> Channel Commands [AKAO Opcodes] </span></h2>
<p>Most complicated part.
</p><p>For every channel in AKAO frame there is set of commands to perform. This is similar to Field opcodes. Here I'll call this sound commands "opcodes". Every opcode has it's own number of arguments (from no-arguments, to 3 arguments).
</p>
<h1> <span class="mw-headline" id="Example_.28home-created_AKAO_frame.29:"> Example (home-created AKAO frame): </span></h1>
<h2> <span class="mw-headline" id="Header"> Header </span></h2>
<p><b>41 4b 41 4f</b> - AKAO string
</p><p><b>34 12</b> - frame ID: 0x1234
</p><p><b>16 00</b> - frame length 0x16 in hex or 22 in decimal
</p><p><b>04 00 96 12 18 22 46 28</b> - unknown data
</p><p><br />
</p>
<h2> <span class="mw-headline" id="Channel_info"> Channel info </span></h2>
<p><b>01 00 00 00</b> - this indicates, that used only one channel
</p><p><b>00 00</b> - offset to first channel opcodes: in our example 0x00 means that next to 
this offset is opcodes for first channel 
</p><p><br />
</p>
<h2> <span class="mw-headline" id="Channel_commands"> Channel commands </span></h2>
<p><b>e8 a8 66</b> - sets tempo, parameter 0x66a8
</p><p><b>ea 00 50</b> - sets reverb depth
</p><p><b>a8 55</b> - load sample 0x55 from INSTR.ALL to channel
</p><p><b>aa 40</b> - sets channel volume
</p><p><b>c2</b> - turns on reverb effect
</p><p><b>a1 0c</b> - sets volume pan
</p><p><b>c8</b> - sets loop point
</p><p><b>66</b> - 0x66&#160;% 11 = 3 (3 means to take 3rd number from play length table), 0x66 / 11 = 9 (9 means to take pitch[9] from loaded instrument record index)
</p><p><b>ca</b> - returns to saved loop point with opcode c8
</p><p><br />
This example plays Chocobo "Whoo-Hoo" (instrument number 0x55) repeatedly.
</p><p><br />
</p>
<h1> <span class="mw-headline" id="Sound_Opcode_list"> Sound Opcode list </span></h1>
<p><a href="http://wiki.qhimm.com/edit/0xa0_(Finish_Channel)?redlink=1" class="new" title="0xa0 (Finish Channel) (page does not exist)">0xa0 (Finish Channel)</a>
</p><p><a href="http://wiki.qhimm.com/edit/0xa1_(Load_Instrument)?redlink=1" class="new" title="0xa1 (Load Instrument) (page does not exist)">0xa1 (Load Instrument)</a>
</p><p><a href="http://wiki.qhimm.com/edit/0xa5_(Pitch_Divider)?redlink=1" class="new" title="0xa5 (Pitch Divider) (page does not exist)">0xa5 (Pitch Divider)</a>
</p><p><a href="http://wiki.qhimm.com/edit/0xa8_(Channel_Volume)?redlink=1" class="new" title="0xa8 (Channel Volume) (page does not exist)">0xa8 (Channel Volume)</a>
</p><p><a href="http://wiki.qhimm.com/edit/0xaa_(Channel_Pan)?redlink=1" class="new" title="0xaa (Channel Pan) (page does not exist)">0xaa (Channel Pan)</a>
</p><p><a href="http://wiki.qhimm.com/edit/0xc8_(Loop_Point)?redlink=1" class="new" title="0xc8 (Loop Point) (page does not exist)">0xc8 (Loop Point)</a>
</p><p><a href="http://wiki.qhimm.com/edit/0xca_(Return_to_Loop_Point)?redlink=1" class="new" title="0xca (Return to Loop Point) (page does not exist)">0xca (Return to Loop Point)</a>
</p><p><a href="../0xe8_(Tempo).html" title="0xe8 (Tempo)" class="mw-redirect">0xe8 (Tempo)</a>
</p><p><a href="http://wiki.qhimm.com/edit/0xea_(Reverb_Depth)?redlink=1" class="new" title="0xea (Reverb Depth) (page does not exist)">0xea (Reverb Depth)</a>
</p>
<!-- 
NewPP limit report
Preprocessor visited node count: 38/1000000
Preprocessor generated node count: 44/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key qhimm_wiki:pcache:idhash:1339-0!*!0!!en!*!* and timestamp 20160922124629 -->
</div>				<!-- /bodycontent -->
								<!-- printfooter -->
				<div class="printfooter">
				Retrieved from "<a href="http://wiki.qhimm.com/index.php?title=FF7/AKAOframes&amp;oldid=3971">http://wiki.qhimm.com/index.php?title=FF7/AKAOframes&amp;oldid=3971</a>"				</div>
				<!-- /printfooter -->
												<!-- catlinks -->
				<div id='catlinks' class='catlinks catlinks-allhidden'></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
				<!-- debughtml -->
								<!-- /debughtml -->
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>Personal tools</h5>
	<ul>
		<li id="pt-login"><a href="http://wiki.qhimm.com/index.php?title=Special:UserLogin&amp;returnto=FF7%2FAKAOframes" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
	</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>Namespaces</h5>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="AKAOframes.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.qhimm.com/edit/Talk:FF7/AKAOframes?redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
	<h4>
		</h4>
	<h5><span>Variants</span><a href="AKAOframes.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>Views</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="AKAOframes.html" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="http://wiki.qhimm.com/edit/FF7/AKAOframes"  title="This page is protected.&#13;&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qhimm.com/history/FF7/AKAOframes"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
	<h5><span>Actions</span><a href="AKAOframes.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">Search</label></h5>
	<form action="http://wiki.qhimm.com/index.php" id="searchform">
				<div>
			<input type="search" name="search" title="Search QhimmWiki [f]" accesskey="f" id="searchInput" />			<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />			<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />					<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(../../skins/wiki.png);" href="../Main_Page.html"  title="Visit the main page"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" id='p-navigation'>
	<h5>Navigation</h5>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-portal"><a href="http://wiki.qhimm.com/view/QhimmWiki:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
			<li id="n-currentevents"><a href="http://wiki.qhimm.com/view/QhimmWiki:Current_events" title="Find background information on current events">Current events</a></li>
			<li id="n-recentchanges"><a href="../Special%253ARecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="../Special%253ARandom.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="../Help%253AContents.html" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>

<!-- /navigation -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" id='p-tb'>
	<h5>Toolbox</h5>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="../Special%253AWhatLinksHere/FF7/AKAOframes.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="../Special%253ARecentChangesLinked/FF7/AKAOframes.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="../Special%253ASpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="http://wiki.qhimm.com/index.php?title=FF7/AKAOframes&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="http://wiki.qhimm.com/index.php?title=FF7/AKAOframes&amp;oldid=3971" title="Permanent link to this revision of the page">Permanent link</a></li>
		</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 21 September 2007, at 15:10.</li>
											<li id="footer-info-viewcount">This page has been accessed 1,006 times.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" href="http://creativecommons.org/licenses/by-nc-sa/2.5/">Attribution-NonCommercial-ShareAlike</a>.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="http://wiki.qhimm.com/view/QhimmWiki:Privacy_policy" title="QhimmWiki:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="http://wiki.qhimm.com/view/QhimmWiki:About" title="QhimmWiki:About">About QhimmWiki</a></li>
											<li id="footer-places-disclaimer"><a href="../QhimmWiki%253AGeneral_disclaimer.html" title="QhimmWiki:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/"><img src="http://creativecommons.org/images/public/somerights20.gif" alt="Attribution-NonCommercial-ShareAlike" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="../../load.php@debug=false&amp;lang=en&amp;modules=skins.vector&amp;only=scripts&amp;skin=vector&amp;%252A"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest"], null, true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.140 secs. -->
	</body>
</html>
