<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>FF7/Field - QhimmWiki</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.20.2" />
<link rel="canonical" href="Field.1.html" />
<link rel="shortcut icon" href="http://wiki.qhimm.com/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.qhimm.com/opensearch_desc.php" title="QhimmWiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.qhimm.com/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/2.5/" />
<link rel="alternate" type="application/atom+xml" title="QhimmWiki Atom feed" href="http://wiki.qhimm.com/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="../../load.php@debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cskins.vector&amp;only=styles&amp;skin=vector&amp;%252A.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: qhimm_wiki:resourceloader:filter:minify-css:7:9f75cd7a214f5d1850ed6d0df1a4a089 */</style>

<script src="../../load.php@debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;%252A"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"FF7/Field","wgTitle":"FF7/Field","wgCurRevisionId":4130,"wgArticleId":821,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"FF7/Field","wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRedirectedFrom":"FF7/Field_Module"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,
"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","watchToken":false});;},{},{});
/* cache key: qhimm_wiki:resourceloader:filter:minify-js:7:7330ebaa3a8da3f7992caf476ddb8efd */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-FF7_Field skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content" class="mw-body">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading"><span dir="auto">FF7/Field</span></h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
								<!-- tagline -->
				<div id="siteSub">From QhimmWiki</div>
				<!-- /tagline -->
								<!-- subtitle -->
				<div id="contentSub"><span class="subpages">&lt; <a href="../FF7.html" title="FF7">FF7</a></span>(Redirected from <a href="http://wiki.qhimm.com/index.php?title=FF7/Field_Module&amp;redirect=no" title="FF7/Field Module">FF7/Field Module</a>)</div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="Field_Module.html#mw-head">navigation</a>, 					<a href="Field_Module.html#p-search">search</a>
				</div>
				<!-- /jumpto -->
								<!-- bodycontent -->
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Field_Module.html#Important_Files"><span class="tocnumber">1</span> <span class="toctext">Important Files</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Field_Module.html#Field_Overview"><span class="tocnumber">2</span> <span class="toctext">Field Overview</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Field_Module.html#Field_Format_.28PC.29"><span class="tocnumber">3</span> <span class="toctext">Field Format (PC)</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Field_Module.html#General_PC_Field_File_Format"><span class="tocnumber">3.1</span> <span class="toctext">General PC Field File Format</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Field_Module.html#PC_Field_File_Header"><span class="tocnumber">3.2</span> <span class="toctext">PC Field File Header</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="Field_Module.html#Field_Format_.28PS1.29"><span class="tocnumber">4</span> <span class="toctext">Field Format (PS1)</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="Field_Module.html#PSX_DAT_Format"><span class="tocnumber">4.1</span> <span class="toctext">PSX DAT Format</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="Field_Module.html#PSX_MIM_Format"><span class="tocnumber">4.2</span> <span class="toctext">PSX MIM Format</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="Field_Module.html#PSX_BSX_Format"><span class="tocnumber">4.3</span> <span class="toctext">PSX BSX Format</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="Field_Module.html#PSX_BCX_Format"><span class="tocnumber">4.4</span> <span class="toctext">PSX BCX Format</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="Field_Module.html#Event_Scripting"><span class="tocnumber">5</span> <span class="toctext">Event Scripting</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="Field_Module.html#Script_commands"><span class="tocnumber">6</span> <span class="toctext">Script commands</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="Field_Module.html#Movies"><span class="tocnumber">7</span> <span class="toctext">Movies</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="Field_Module.html#The_3D_Overlay"><span class="tocnumber">8</span> <span class="toctext">The 3D Overlay</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="Field_Module.html#Data_Organization"><span class="tocnumber">9</span> <span class="toctext">Data Organization</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="Field_Module.html#.22A.22_Field_Animation_Files_for_PC_by_Mirex_.28Edits_by_Aali.29"><span class="tocnumber">10</span> <span class="toctext">"A" Field Animation Files for PC by Mirex (Edits by Aali)</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Important_Files"> Important Files </span></h2>
<table border="0" cellspacing="1" cellpadding="3" style="background: rgb(0,0,0)" align="center">
<tr>
<th style="background:rgb(0,255,0)" align="center"> PSX Version
</th>
<th style="background:rgb(0,255,0)" align="center"> PC Version
</th></tr>
<tr>
<td style="background:rgb(0,255,0)"> /FIELD/*.DAT
</td>
<td style="background:rgb(0,255,0)"> /DATA/FIELD/FLEVEL.LGP
</td></tr>
<tr>
<td style="background:rgb(0,255,0)"> /FIELD/*.MIM
</td>
<td style="background:rgb(0,255,0)"> /DATA/FIELD/FLEVEL.LGP
</td></tr>
<tr>
<td style="background:rgb(0,255,0)"> /FIELD/*.BSX
</td>
<td style="background:rgb(0,255,0)"> &#160;
</td></tr>
<tr>
<td style="background:rgb(0,255,0)"> /FIELD/*.BCX
</td>
<td style="background:rgb(0,255,0)"> /DATA/FIELD/CHAR.LGP
</td></tr></table>
<h2> <span class="mw-headline" id="Field_Overview"> Field Overview </span></h2>
<p>The field module is the core of the game to which everything else is spawned. It is tied very closely with the kernel and contains many low-level calls to it. The field system also contains a self-contained bytecode language called commonly called "Field Script". The field module is responsible for the following:
</p>
<ul><li> The loading and parsing of the field files
</li><li> The display of the 2D background ands related special effects
</li><li> The display of 3D elements in the field such as the camera, perspective and and entities
</li><li> The running of the Field Script to display events and to get user input
</li><li> The on-demand loading of other modules when needed
</li></ul>
<p>The Field module loads modular "Field Files". In the PC version, the Field File is a single file with nine sections. In the PSX version, there are three files with the same name but with different extensions that do the same thing.  The three files are MIM (Mutiple Image Maps, or the backgrounds), DAT (Field Script Data), and BSX (3D data).
</p>
<div class="thumb tright"><div class="thumbinner" style="width:182px;"><a href="../File%253AField_BackgroundVRAM.jpg.html" class="image"><img alt="" src="../../images/thumb/d/d7/Field_BackgroundVRAM.jpg/180px-Field_BackgroundVRAM.jpg" width="180" height="90" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="../File%253AField_BackgroundVRAM.jpg.html" class="internal" title="Enlarge"><img src="../../skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>Snapshot of the PSX's VRAM demonstrating the background field files in various stages of assembly.</div></div></div> 
<p>The backgrounds are actually 16x16 blocks that are loaded into VRAM and then assembled into the video buffer every frame. The system allows for layers to obscure the 3D entities using a simple painter's algorithm.
</p><p>In this particular field file, there are six cached sections of background data. Also notice the bright green patches that don't show up in in the video buffer. This was to show where a lower layer of 2D data was to be covered by a higher layer. The bright green is for debug purposes. During development, if any bright green showed up, it meant that your upper layer had a "hole" in it that a 3D entity could be seen through. 
</p><p>When the PSX version of FF7 is ran in higher resolutions via emulation with texture filtering on, often the lower layers will "bleed" outside the upper layer and make artifacts. This was also the reason why the field files were not re-rendered for the PC version of the game. It would of required "re-cutting" the layers again in the higher resolution. 
</p><p>Another last thing to note is in the middle of the bottom texture cache there are a sea of eyes. These blink at random times and reflect the random blinking of the characters in the game.
</p><p><br />
</p>
<h2> <span class="mw-headline" id="Field_Format_.28PC.29"> Field Format (PC) </span></h2>
<h3> <span class="mw-headline" id="General_PC_Field_File_Format"> General PC Field File Format </span></h3>
<p>Field files are always found in FLEVEL.LGP. They are always <a href="LZS_format.html" title="FF7/LZS format">LZS</a> compressed.
</p><p>The first two bytes of each (decompressed) field file are blank (zero).
The next four bytes is an integer indicating how many sections are present in the file.
Then a number of 4-byte integers follow, giving the starting offset for each section.
</p><p>All field files should contain 9 sections; it's what FF7 expects.
</p>
<h3> <span class="mw-headline" id="PC_Field_File_Header"> PC Field File Header </span></h3>
<table border="0" cellspacing="1" cellpadding="3" style="background: rgb(0,0,0)" align="center">
<tr>
<th style="background:rgb(204,204,204)" align="center"> Offset
</th>
<th style="background:rgb(204,204,204)" align="center"> Size
</th>
<th style="background:rgb(204,204,204)" align="center"> Description
</th>
<th style="background:rgb(204,204,204)" align="center"> Section Data
</th></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x00
</td>
<td style="background:rgb(255,255,255)"> 2 bytes
</td>
<td style="background:rgb(255,255,255)"> Blank
</td>
<td style="background:rgb(255,255,255)"> Always 0x00
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x02
</td>
<td style="background:rgb(255,255,255)"> 4 bytes
</td>
<td style="background:rgb(255,255,255)"> Number of Sections
</td>
<td style="background:rgb(255,255,255)"> Always 0x0009
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x06
</td>
<td style="background:rgb(255,255,255)"> 4 bytes
</td>
<td style="background:rgb(255,255,255)"> Pointer to Section 1
</td>
<td style="background:rgb(255,255,255)"> <a href="Field/Field_Script.html" title="FF7/Field/Field Script" class="mw-redirect">Field Script &amp; Dialog</a>
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x0A
</td>
<td style="background:rgb(255,255,255)"> 4 bytes
</td>
<td style="background:rgb(255,255,255)"> Pointer to Section 2
</td>
<td style="background:rgb(255,255,255)"> <a href="Field/Camera_Matrix.html" title="FF7/Field/Camera Matrix">Camera Matrix</a>
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x0E
</td>
<td style="background:rgb(255,255,255)"> 4 bytes
</td>
<td style="background:rgb(255,255,255)"> Pointer to Section 3
</td>
<td style="background:rgb(255,255,255)"> <a href="Field/Model_Loader.html" title="FF7/Field/Model Loader">Model Loader</a>
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x12
</td>
<td style="background:rgb(255,255,255)"> 4 bytes
</td>
<td style="background:rgb(255,255,255)"> Pointer to Section 4
</td>
<td style="background:rgb(255,255,255)"> <a href="Field/Palette.html" title="FF7/Field/Palette">Palette</a>
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x16
</td>
<td style="background:rgb(255,255,255)"> 4 bytes
</td>
<td style="background:rgb(255,255,255)"> Pointer to Section 5
</td>
<td style="background:rgb(255,255,255)"> <a href="Field/Walkmesh.html" title="FF7/Field/Walkmesh">Walkmesh</a>
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x1A
</td>
<td style="background:rgb(255,255,255)"> 4 bytes
</td>
<td style="background:rgb(255,255,255)"> Pointer to Section 6
</td>
<td style="background:rgb(255,255,255)"> <a href="Field_Module/DAT/Tile_Map.html" title="FF7/Field Module/DAT/Tile Map">TileMap</a> (Unused)
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x1E
</td>
<td style="background:rgb(255,255,255)"> 4 bytes
</td>
<td style="background:rgb(255,255,255)"> Pointer to Section 7
</td>
<td style="background:rgb(255,255,255)"> <a href="Field/Encounter.html" title="FF7/Field/Encounter">Encounter</a>
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x22
</td>
<td style="background:rgb(255,255,255)"> 4 bytes
</td>
<td style="background:rgb(255,255,255)"> Pointer to Section 8
</td>
<td style="background:rgb(255,255,255)"> <a href="Field/Triggers.html" title="FF7/Field/Triggers">Triggers</a>
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x26
</td>
<td style="background:rgb(255,255,255)"> 4 bytes
</td>
<td style="background:rgb(255,255,255)"> Pointer to Section 9
</td>
<td style="background:rgb(255,255,255)"> <a href="Field/Background.html" title="FF7/Field/Background">Background</a>
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x2A
</td>
<td style="background:rgb(255,255,255)"> 4 bytes
</td>
<td style="background:rgb(255,255,255)"> Where Pointer to Section 1 points to
</td>
<td style="background:rgb(255,255,255)"> Length of Section 1
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> 0x2E
</td>
<td style="background:rgb(255,255,255)"> Varies
</td>
<td style="background:rgb(255,255,255)"> Start of Section 1 data. Continues for the<br />number of bytes specified in Section Length
</td>
<td style="background:rgb(255,255,255)"> <i>See links above</i>
</td></tr></table>
<p>Each section generally starts with a four byte integer indicating the length of the section. You could just work this out by comparing offsets (how much space until the next section/end of file, etc) but FF7 stores the length at the start of the section anyway. After that the actual data follows. So the first bit of data for a section is actually 4 bytes after the point given in the section header (since the first four bytes are actually the length marker).
</p><p>To examine each section, please navigate using the links in the table above. For sections 3 and 8, there is some information on <a rel="nofollow" class="external text" href="http://forums.qhimm.com/index.php?topic=4358.msg58674#msg58674">the forum</a>.
</p>
<h2> <span class="mw-headline" id="Field_Format_.28PS1.29"> Field Format (PS1) </span></h2>
<h3> <span class="mw-headline" id="PSX_DAT_Format"> PSX DAT Format </span></h3>
<p>The PSX script is contained in the DAT file, it is compressed with <a href="LZS_format.html" title="FF7/LZS format">LZS compression</a>.
</p><p>The header for the DAT file (after it is decompressed), is 28 bytes in size (they are used in the PSX, it's a list of 7 long word values which point to locations in PSX RAM). So for each of these sections are addressable by taking the first memory location subtracting it and adding 28.
</p><p>There are 7 sections each coresponding to the first 7 memory locations at the begining of the file.
</p>
<table border="0" cellspacing="1" cellpadding="3" style="background: rgb(0,0,0)" align="center">
<tr>
<th style="background:rgb(0,255,0)" align="center"> Section Name
</th>
<th style="background:rgb(0,255,0)" align="center"> Section Information
</th></tr>
<tr>
<td style="background:rgb(200,255,200)"> <a href="Field/Script.html" title="FF7/Field/Script">Script</a>
</td>
<td style="background:rgb(200,255,200)"> Contains conversations, save point interaction etc.
</td></tr>
<tr>
<td style="background:rgb(200,255,200)"> <a href="Field/Walkmesh.html" title="FF7/Field/Walkmesh">Walkmesh</a>
</td>
<td style="background:rgb(200,255,200)"> Contains walkmesh triangles and access info.
</td></tr>
<tr>
<td style="background:rgb(200,255,200)"> <a href="Field_Module/DAT/Tile_Map.html" title="FF7/Field Module/DAT/Tile Map">TileMap</a>
</td>
<td style="background:rgb(200,255,200)"> Contains the information for the background, animation,<br /> and static scene objects.
</td></tr>
<tr>
<td style="background:rgb(200,255,200)"> <a href="Field/Camera_Matrix.html" title="FF7/Field/Camera Matrix">Camera_Matrix</a>
</td>
<td style="background:rgb(200,255,200)"> Contains camera info.
</td></tr>
<tr>
<td style="background:rgb(200,255,200)"> <a href="Field/Triggers.html" title="FF7/Field/Triggers">Triggers</a>
</td>
<td style="background:rgb(200,255,200)"> Contains triggers, singles, gateways and so on.
</td></tr>
<tr>
<td style="background:rgb(200,255,200)"> <a href="Field/Encounter.html" title="FF7/Field/Encounter">Encounter</a>
</td>
<td style="background:rgb(200,255,200)"> Battle Encounter information for location.
</td></tr>
<tr>
<td style="background:rgb(200,255,200)"> <a href="Field/Models.html" title="FF7/Field/Models">Models</a>
</td>
<td style="background:rgb(200,255,200)"> Some info about field models.
</td></tr></table>
<h3> <span class="mw-headline" id="PSX_MIM_Format"> PSX MIM Format </span></h3>
<p>Part of the PSX background data is contained in the <a href="Field/MIMfile.html" title="FF7/Field/MIMfile">MIM file</a>, it is compressed with <a href="LZS_format.html" title="FF7/LZS format">LZS compression</a>.  It consists of palettes (256 color ones) and screen blocks. No data for locating the blocks on the screen is in this file. The MIM file is a truncated TIM file and contains the normal clut location height and width information.  This information is directly loaded into the PSX video ram to be decoded by the field module.
</p>
<h3> <span class="mw-headline" id="PSX_BSX_Format"> PSX BSX Format </span></h3>
<p>The Field models are contained in the <a href="Field/BSX.html" title="FF7/Field/BSX">BSX file</a>, it is compressed with <a href="LZS_format.html" title="FF7/LZS format">LZS compression</a>.  <a href="Field/FIELD.TDB.html" title="FF7/Field/FIELD.TDB">FIELD.TDB</a> contains the textures for these models.
</p>
<h3> <span class="mw-headline" id="PSX_BCX_Format"> PSX BCX Format </span></h3>
<p>The individual characters' field models are stored in <a href="Field/BCX.html" title="FF7/Field/BCX">BCX files</a>. Their textures are also in <a href="Field/FIELD.TDB.html" title="FF7/Field/FIELD.TDB">FIELD.TDB</a>; they are compressed with <a href="LZS_format.html" title="FF7/LZS format">LZS compression</a>.
</p>
<h2> <span class="mw-headline" id="Event_Scripting"> Event Scripting </span></h2>
<p>Event scripting is handled via a series of script commands and entities spawned for the event.  The exception to this is the battle event scripting. This is actually a little bit different.  Please refer to the <a href="Field/Script.html" title="FF7/Field/Script">Field Script</a> for more information.
</p>
<h2> <span class="mw-headline" id="Script_commands"> Script commands </span></h2>
<p>The event scripting language for FF7 has 246 commands that have a wide array of functions. For a complete listing of the commands, opcodes, arguments and descriptions, please refer to the <a href="Field/Script/Opcodes.html" title="FF7/Field/Script/Opcodes">opcodes</a> section.
</p>
<h2> <span class="mw-headline" id="Movies"> Movies </span></h2>
<p>Movies in FF7 are actually triggered from the <a href="Field/Script.html" title="FF7/Field/Script">Field Script</a>. The <a href="Field/Script/Opcodes/F8_PMVIE.html" title="FF7/Field/Script/Opcodes/F8 PMVIE">F8 PMVIE</a> opcode is first used to set the movie for which the <a href="Field/Script/Opcodes/F9_MOVIE.html" title="FF7/Field/Script/Opcodes/F9 MOVIE">F9 MOVIE</a> opcode is used to play.  It is important to remember the MOVIE ID may vary in the PS1 versionn depending on what disc you are on.
The PC movies were encoded using the DUCK (goose?) format and are AVI video files.
</p><p>The PS1 movies were encoded using FMV Motion JPEG video files, for the playstation. These files cannot be decode or read directly from the CD disc media because of the Mode 2 format of the files.  The files are encoded using ISO Mode 2 which means the sectors are 2302 bytes in length instead of 2048.  The video files have interleaved audio (ADPCM format), between video frames and are 320x224 15fps.  Video files that have no audio with it actually has empty sectors of space between video frames to prevent the extremely timing sensitive MDEC decoder in the playstation from locking up.
</p><p><a href="../User%253ACyberman.html" title="User:Cyberman">Cyberman</a> 14:18, 30 Dec 2006 (CST)
</p>
<h2> <span class="mw-headline" id="The_3D_Overlay"> The 3D Overlay </span></h2>
<h2> <span class="mw-headline" id="Data_Organization"> Data Organization </span></h2>
<h2> <span class="mw-headline" id=".22A.22_Field_Animation_Files_for_PC_by_Mirex_.28Edits_by_Aali.29"> "A" Field Animation Files for PC by <a href="http://wiki.qhimm.com/edit/User:Mirex?redlink=1" class="new" title="User:Mirex (page does not exist)">Mirex</a> (Edits by <a href="http://wiki.qhimm.com/edit/User:Aali?redlink=1" class="new" title="User:Aali (page does not exist)">Aali</a>) </span></h2>
<p>Each animation file holds one character animation ( run, walk or some other). Some characters have more animation files. Animation is set of frames, in each frame are stored bone rotations. 
</p><p>-- animation file contents --
</p>
<table border="0" cellspacing="1" cellpadding="3" style="background: rgb(0,0,0)" align="center">
<tr>
<th style="background:rgb(204,204,204)" align="center"> Name
</th>
<th style="background:rgb(204,204,204)" align="center"> Size in bytes
</th></tr>
<tr>
<td style="background:rgb(255,255,255)"> header
</td>
<td style="background:rgb(255,255,255)" align="center"> 36
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> frames
</td>
<td style="background:rgb(255,255,255)" align="center"> frames_count * frame
</td></tr></table>
<p>-- one frame, size is (bones * 12 + 12 + 12) --
</p>
<table border="0" cellspacing="1" cellpadding="3" style="background: rgb(0,0,0)" align="center">
<tr>
<th style="background:rgb(204,204,204)" align="center"> Name
</th>
<th style="background:rgb(204,204,204)" align="center"> Size
</th></tr>
<tr>
<td style="background:rgb(255,255,255)"> root rotation
</td>
<td style="background:rgb(255,255,255)" align="center"> 12 = 3 floats
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> root translation
</td>
<td style="background:rgb(255,255,255)" align="center"> 12 = 3 floats
</td></tr>
<tr>
<td style="background:rgb(255,255,255)"> rotations
</td>
<td style="background:rgb(255,255,255)" align="center"> bones * 12 bytes = bones * 3 floats
</td></tr></table>
<p>header structure, 36 bytes
</p>
<pre>struct {
    unsigned int32 version;
    unsigned int32 frames_count;
    unsigned int32 bones_count;
    unsigned char rotation_order[3];
    unsigned char unused;
    unsigned int32 runtime_data[5];
} anim_head;
</pre>
<p>I understand only two values from the header, 'frames_count' which is number of animation frames and 'bones_count' which is suprisingly number of animated bones.
</p><p><i>version should always be 1 or FF7 will not load the file</i>
</p><p><i>rotation order determines in which order rotations are applied, 0 means alpha rotation, 1 beta rotation and 2 gamma rotation.</i>
</p><p><i>runtime data has no meaning in the animation file and is discarded on load</i>
</p><p>If you want to load all possible animations for the model (even animations of different models) then check if animation file has same number of bones as current model. 
</p><p>Frame starts with the root rotations and root translations, followed by rotations for each bone. Rotations are stored as 3 floats (float is 4byte floating-point number).
</p>
<!-- 
NewPP limit report
Preprocessor visited node count: 63/1000000
Preprocessor generated node count: 70/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key qhimm_wiki:pcache:idhash:821-0!*!0!!en!2!* and timestamp 20160922115516 -->
</div>				<!-- /bodycontent -->
								<!-- printfooter -->
				<div class="printfooter">
				Retrieved from "<a href="http://wiki.qhimm.com/index.php?title=FF7/Field&amp;oldid=4130">http://wiki.qhimm.com/index.php?title=FF7/Field&amp;oldid=4130</a>"				</div>
				<!-- /printfooter -->
												<!-- catlinks -->
				<div id='catlinks' class='catlinks catlinks-allhidden'></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
				<!-- debughtml -->
								<!-- /debughtml -->
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>Personal tools</h5>
	<ul>
		<li id="pt-login"><a href="http://wiki.qhimm.com/index.php?title=Special:UserLogin&amp;returnto=FF7%2FField+Module" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
	</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>Namespaces</h5>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="Field.1.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://wiki.qhimm.com/edit/Talk:FF7/Field?redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
	<h4>
		</h4>
	<h5><span>Variants</span><a href="Field_Module.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>Views</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="Field.1.html" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="http://wiki.qhimm.com/edit/FF7/Field"  title="This page is protected.&#13;&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="http://wiki.qhimm.com/history/FF7/Field"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
	<h5><span>Actions</span><a href="Field_Module.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">Search</label></h5>
	<form action="http://wiki.qhimm.com/index.php" id="searchform">
				<div>
			<input type="search" name="search" title="Search QhimmWiki [f]" accesskey="f" id="searchInput" />			<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />			<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />					<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(../../skins/wiki.png);" href="../Main_Page.html"  title="Visit the main page"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" id='p-navigation'>
	<h5>Navigation</h5>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-portal"><a href="http://wiki.qhimm.com/view/QhimmWiki:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
			<li id="n-currentevents"><a href="http://wiki.qhimm.com/view/QhimmWiki:Current_events" title="Find background information on current events">Current events</a></li>
			<li id="n-recentchanges"><a href="../Special%253ARecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="../Special%253ARandom.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
			<li id="n-help"><a href="../Help%253AContents.html" title="The place to find out">Help</a></li>
		</ul>
	</div>
</div>

<!-- /navigation -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" id='p-tb'>
	<h5>Toolbox</h5>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="../Special%253AWhatLinksHere/FF7/Field.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="../Special%253ARecentChangesLinked/FF7/Field.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="../Special%253ASpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="http://wiki.qhimm.com/index.php?title=FF7/Field&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="http://wiki.qhimm.com/index.php?title=FF7/Field&amp;oldid=4130" title="Permanent link to this revision of the page">Permanent link</a></li>
		</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 3 March 2013, at 01:21.</li>
											<li id="footer-info-viewcount">This page has been accessed 52,611 times.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" href="http://creativecommons.org/licenses/by-nc-sa/2.5/">Attribution-NonCommercial-ShareAlike</a>.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="http://wiki.qhimm.com/view/QhimmWiki:Privacy_policy" title="QhimmWiki:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="http://wiki.qhimm.com/view/QhimmWiki:About" title="QhimmWiki:About">About QhimmWiki</a></li>
											<li id="footer-places-disclaimer"><a href="../QhimmWiki%253AGeneral_disclaimer.html" title="QhimmWiki:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/"><img src="http://creativecommons.org/images/public/somerights20.gif" alt="Attribution-NonCommercial-ShareAlike" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="../../load.php@debug=false&amp;lang=en&amp;modules=skins.vector&amp;only=scripts&amp;skin=vector&amp;%252A"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest"], null, true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.122 secs. -->
	</body>
</html>
